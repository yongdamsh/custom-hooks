<!DOCTYPE html>
<html>
  <body style="margin: 0; padding: 0; text-align: center; box-sizing: border-box">
    <div id="root" />

    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="../dist/useElementVisibility.js"></script>
    <script type="text/babel">
      const windowHeight = window.innerHeight + 'px';
      const boxStyles = {
        height: windowHeight,
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
      };
      const textStyles = {
        margin: 0,
        fontSize: 32,
        color: 'white',
      };
      const threshold = new Array(101).fill().map((_, index) => index * 0.01);

      function AdvancedExample() {
        const [visibility, subscribe] = useElementVisibility({ threshold });
        const ratio = {
          red: 0,
          blue: 0,
          green: 0,
        };

        return (
          <React.Fragment>
            <div style={{ height: windowHeight, paddingTop: '10px' }}>
              <h1 style={{ marginTop: 0 }}>InfiniteScroll Example</h1>
              <p>Scroll down ⬇️ </p>
            </div>
            <div data-cy="red-box" ref={subscribe} style={{ ...boxStyles, backgroundColor: 'red' }}>
              <p style={textStyles}>{ratio.red}</p>
            </div>
            <div data-cy="blue-box" ref={subscribe} style={{ ...boxStyles, backgroundColor: 'blue' }}>
              <p style={textStyles}>{ratio.blue}</p>
            </div>
            <div data-cy="green-box" ref={subscribe} style={{ ...boxStyles, backgroundColor: 'green' }}>
              <p style={textStyles}>{ratio.green}</p>
            </div>
          </React.Fragment>
        );
      }

      ReactDOM.render(<AdvancedExample />, document.getElementById('root'));
    </script>
  </body>
</html>
